{"ast":null,"code":"import _toConsumableArray from\"D:/DKHP_demo/dkhp_frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/DKHP_demo/dkhp_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useSnackbar}from\"notistack\";import{useContext,useEffect,useState}from\"react\";import{AdminContext}from\"../Router/AdminRouter\";import{addSemester,getAllSemesters,removeSemester}from\"../API/AminAPI\";import SemesterForm from\"../AdminComponent/SemesterForm\";import TableHeader from\"../Component/TableHeader\";import{FormModal}from\"../AdminComponent/ModalAndAlert\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SemesterPage=function SemesterPage(){var _useContext=useContext(AdminContext),setError=_useContext.setError;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),seData=_useState2[0],setSeData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),show=_useState4[0],setShow=_useState4[1];//0: ko show, 1:show\nvar _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var config={variant:'',anchorOrigin:{horizontal:'center',vertical:'bottom'}};var semesterDTO={semesterNum:0,year:0};useEffect(function(){getAllSemesters().then(function(res){setSeData(res.data);}).catch(function(err){return setError(err);});},[]);var handleAddButton=function handleAddButton(e){e.preventDefault();setShow(1);};var handleSubmit=function handleSubmit(){console.log(semesterDTO);addSemester(semesterDTO.semesterNum,semesterDTO.year).then(function(res){setSeData(function(prevData){var updatedData=_toConsumableArray(prevData);updatedData.push(res.data);return updatedData;});config.variant=\"success\";enqueueSnackbar(\"Thêm thành công học kì  mới\",config);setShow(0);}).catch(function(err){if(err.response.status==400){config.variant=\"error\";enqueueSnackbar(err.response.data,config);}else setError(err);});};var handleDelButton=function handleDelButton(e,id){e.preventDefault();removeSemester(id).then(function(res){setSeData(function(preData){return preData.filter(function(data){return data.id!=id;});});config.variant=\"success\";enqueueSnackbar(\"Xóa thành công học kì \",config);}).catch(function(err){return setError(err);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ContentAlignment\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Danh s\\xE1ch c\\xE1c h\\u1ECDc k\\xEC\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-success\",onClick:function onClick(e){return handleAddButton(e);},children:\"Th\\xEAm k\\xEC m\\u1EDBi\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"TableWapper border-bottom border-dark\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover\",children:[/*#__PURE__*/_jsx(TableHeader,{data:[\"STT\",\"Học kì\",\"Năm học\",\"Action\"]}),/*#__PURE__*/_jsx(\"tbody\",{children:seData===null||seData===void 0?void 0:seData.map(function(data,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:index+1}),/*#__PURE__*/_jsxs(\"td\",{children:[\"K\\xEC \",data.semesterNum]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"N\\u0103m h\\u1ECDc \",data.year]}),/*#__PURE__*/_jsx(\"td\",{colSpan:2,children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger mr-2\",onClick:function onClick(e){return handleDelButton(e,data.id);},children:\"Delete\"})})]},index);})})]})})]}),show==1&&/*#__PURE__*/_jsx(FormModal,{setShow:setShow,handleSubmit:handleSubmit,title:\"TH\\xCAM H\\u1ECCC K\\xCC\",children:/*#__PURE__*/_jsx(SemesterForm,{semesterDTO:semesterDTO})})]});};export default SemesterPage;","map":{"version":3,"names":["useSnackbar","useContext","useEffect","useState","AdminContext","addSemester","getAllSemesters","removeSemester","SemesterForm","TableHeader","FormModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SemesterPage","_useContext","setError","_useState","_useState2","_slicedToArray","seData","setSeData","_useState3","_useState4","show","setShow","_useSnackbar","enqueueSnackbar","config","variant","anchorOrigin","horizontal","vertical","semesterDTO","semesterNum","year","then","res","data","catch","err","handleAddButton","e","preventDefault","handleSubmit","console","log","prevData","updatedData","_toConsumableArray","push","response","status","handleDelButton","id","preData","filter","children","className","type","onClick","map","index","colSpan","title"],"sources":["D:/DKHP_demo/dkhp_frontend/src/AdminPage/SemesterPage.js"],"sourcesContent":["import { useSnackbar } from \"notistack\";\r\nimport { useContext, useEffect, useState } from \"react\";\r\nimport { AdminContext } from \"../Router/AdminRouter\";\r\nimport { addSemester, getAllSemesters, removeSemester } from \"../API/AminAPI\";\r\nimport SemesterForm from \"../AdminComponent/SemesterForm\";\r\nimport TableHeader from \"../Component/TableHeader\";\r\nimport { FormModal } from \"../AdminComponent/ModalAndAlert\";\r\n\r\nconst SemesterPage=()=>{\r\n          const {setError}=useContext(AdminContext);\r\n          const [seData, setSeData]=useState([]);\r\n          const[show, setShow]=useState(0); //0: ko show, 1:show\r\n          const { enqueueSnackbar } = useSnackbar();\r\n          const config = {variant: '',anchorOrigin:{ horizontal: 'center' , vertical: 'bottom'}}\r\n          const semesterDTO={\r\n                    semesterNum:0,\r\n                    year:0\r\n          }\r\n          useEffect(()=>{\r\n                    getAllSemesters().then(res=>{\r\n                              setSeData(res.data)\r\n                    })\r\n                    .catch((err)=>setError(err))\r\n          },[])\r\n          const handleAddButton=(e)=>{\r\n                    e.preventDefault();\r\n                    setShow(1);\r\n          }\r\n          const handleSubmit=()=>{\r\n                    console.log(semesterDTO)\r\n                    addSemester(semesterDTO.semesterNum, semesterDTO.year).then(res=>{\r\n                              setSeData((prevData)=>{\r\n                                        const updatedData=[...prevData];\r\n                                        updatedData.push(res.data);\r\n                                        return updatedData;\r\n                              })\r\n                              config.variant=\"success\";\r\n                              enqueueSnackbar(\"Thêm thành công học kì  mới\", config);\r\n                              setShow(0);\r\n                    })\r\n                    .catch(err=>{\r\n                              if(err.response.status==400){\r\n                                        config.variant=\"error\";\r\n                                        enqueueSnackbar(err.response.data, config);\r\n                              }\r\n                              else setError(err)\r\n                    })\r\n          }\r\n          const handleDelButton=(e,id)=>{\r\n                    e.preventDefault();\r\n                    removeSemester(id).then(res=>{\r\n                              setSeData((preData)=>{\r\n                                        return preData.filter((data)=>data.id!=id)\r\n                              })\r\n                              config.variant=\"success\";\r\n                              enqueueSnackbar(\"Xóa thành công học kì \", config);\r\n                    })\r\n                    .catch(err=>setError(err))\r\n          }\r\n          return(\r\n          <>\r\n                    <div className=\"main-page\">\r\n                              <div className=\"ContentAlignment\">\r\n                                        <h1>Danh sách các học kì</h1>\r\n                                        <button  type=\"button\" className=\"btn btn-success\" onClick={(e)=>handleAddButton(e)}>Thêm kì mới</button>\r\n                              </div>\r\n                              <div className=\"TableWapper border-bottom border-dark\">\r\n                                  <table className=\"table table-hover\">\r\n                                      <TableHeader data={[\"STT\",\"Học kì\",\"Năm học\",\"Action\"]} />\r\n                                      <tbody>\r\n                                  {seData?.map((data, index)=> {\r\n                                          return (\r\n                                              <tr key={index}>\r\n                                                  <th>{index+1}</th>\r\n                                                  <td>Kì {data.semesterNum}</td>\r\n                                                  <td>Năm học {data.year}</td>\r\n                                                  <td colSpan={2}>\r\n                                                            <button type=\"button\" className=\"btn btn-danger mr-2\" onClick={(e)=>handleDelButton(e,data.id)}>Delete</button>\r\n                                                  </td>\r\n                                              </tr>\r\n                                          )\r\n                                      })}\r\n                                      </tbody>\r\n                                  </table>\r\n                              </div>\r\n                    </div>\r\n                      {show==1&&<FormModal setShow={setShow} handleSubmit={handleSubmit} title=\"THÊM HỌC KÌ\"><SemesterForm semesterDTO={semesterDTO}/></FormModal>}\r\n          </>\r\n          )\r\n}\r\nexport default SemesterPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}