{"ast":null,"code":"import _toConsumableArray from\"D:/DKHP_demo/dkhp_frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/DKHP_demo/dkhp_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef,useContext,useMemo}from\"react\";import CourseTable from\"../Component/CourseTable\";import{enrollCourses}from\"../API/StudentAPI\";import{ClientContext}from\"../Router/ClientRouter\";import{OpenedCourses_ResultModal}from\"../Component/Modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var OpenedCoursesPage=function OpenedCoursesPage(){var _useContext=useContext(ClientContext),courseData=_useContext.courseData,setError=_useContext.setError;var _useState=useState({show:false,data:[]}),_useState2=_slicedToArray(_useState,2),modal=_useState2[0],setModal=_useState2[1];var _useState3=useState(new Set()),_useState4=_slicedToArray(_useState3,2),checkedIds=_useState4[0],setCheckedIds=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isDKButtonDisabled=_useState6[0],setIsDKButtonDisabled=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),searchTerm=_useState8[0],setSearchTerm=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),search=_useState10[0],setSearch=_useState10[1];function handleDKButton(e){e.preventDefault();enrollCourses(_toConsumableArray(checkedIds)).then(function(res){setModal({show:true,data:new Map(Object.entries(res.data))});setCheckedIds(new Set());}).catch(function(err){return setError(err);});}var handleClose=function handleClose(){setModal({show:false,data:[]});};useEffect(function(){if(checkedIds.size===0)setIsDKButtonDisabled(true);else setIsDKButtonDisabled(false);},[checkedIds]);var handleFilter=function handleFilter(item){var re=new RegExp(\"^\"+search,\"i\");return item.courseId.match(re);};var filterCourses=search===\"\"?courseData:courseData.filter(handleFilter);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-page\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ContentAlignment\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Danh s\\xE1ch l\\u1EDBp m\\u1EDF ch\\u1EDD \\u0111\\u0103ng k\\xED\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:function onClick(e){return handleDKButton(e);},disabled:isDKButtonDisabled,children:\"\\u0110\\u0103ng k\\xED\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"d-flex col-lg-6\",role:\"search\",onSubmit:function onSubmit(e){e.preventDefault();setSearch(searchTerm);},children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-control me-2\",type:\"search\",placeholder:\"T\\xECm ki\\u1EBFm theo m\\xE3 l\\u1EDBp\",id:\"Search\",onChange:function onChange(e){return setSearchTerm(e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-success\",type:\"submit\",children:\"Search\"})]})]}),/*#__PURE__*/_jsx(CourseTable,{filterCourses:filterCourses,checkedIds:checkedIds,setCheckedIds:setCheckedIds})]}),/*#__PURE__*/_jsx(OpenedCourses_ResultModal,{modal:modal,handleClose:handleClose})]});};export default OpenedCoursesPage;","map":{"version":3,"names":["React","useState","useEffect","useRef","useContext","useMemo","CourseTable","enrollCourses","ClientContext","OpenedCourses_ResultModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","OpenedCoursesPage","_useContext","courseData","setError","_useState","show","data","_useState2","_slicedToArray","modal","setModal","_useState3","Set","_useState4","checkedIds","setCheckedIds","_useState5","_useState6","isDKButtonDisabled","setIsDKButtonDisabled","_useState7","_useState8","searchTerm","setSearchTerm","_useState9","_useState10","search","setSearch","handleDKButton","e","preventDefault","_toConsumableArray","then","res","Map","Object","entries","catch","err","handleClose","size","handleFilter","item","re","RegExp","courseId","match","filterCourses","filter","children","className","type","onClick","disabled","role","onSubmit","placeholder","id","onChange","target","value"],"sources":["D:/DKHP_demo/dkhp_frontend/src/Page/OpenedCoursesPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useContext, useMemo } from \"react\";\r\nimport CourseTable from \"../Component/CourseTable\";\r\nimport { enrollCourses } from \"../API/StudentAPI\";\r\nimport { ClientContext} from \"../Router/ClientRouter\";\r\nimport { OpenedCourses_ResultModal } from \"../Component/Modal\";\r\nconst OpenedCoursesPage=()=>{\r\n          const {courseData,setError}=useContext(ClientContext);\r\n          const[modal, setModal]=useState({show:false, data:[]});\r\n          const [checkedIds, setCheckedIds]=useState(new Set());\r\n          const [isDKButtonDisabled, setIsDKButtonDisabled]=useState(true);\r\n          const [searchTerm, setSearchTerm]=useState(\"\");\r\n          const [search, setSearch]=useState(\"\");\r\n          function handleDKButton(e){\r\n                e.preventDefault();\r\n                enrollCourses([...checkedIds]).then(res=>{\r\n                        setModal({show:true, data:new Map(Object.entries(res.data))});\r\n                        setCheckedIds(new Set())\r\n                })\r\n                .catch(err=>setError(err))\r\n            }\r\n            const handleClose=()=>{\r\n                  setModal({show:false, data:[]});\r\n            }\r\n          useEffect(()=>{\r\n                if(checkedIds.size===0) setIsDKButtonDisabled(true);\r\n                else setIsDKButtonDisabled(false);\r\n          },[checkedIds])\r\n          const handleFilter = (item) => {\r\n                const re = new RegExp(\"^\"+search,\"i\");\r\n                return item.courseId.match(re);\r\n        }\r\n          let filterCourses=(search===\"\")?courseData:courseData.filter(handleFilter);\r\n         return(\r\n          <>\r\n          <div className=\"main-page\">\r\n                    <div className=\"ContentAlignment\">\r\n                              <h4>Danh sách lớp mở chờ đăng kí</h4>\r\n                              <button type=\"button\" className=\"btn btn-primary\" onClick={(e)=>handleDKButton(e)} disabled={isDKButtonDisabled}>Đăng kí</button>\r\n                              <form className=\"d-flex col-lg-6\" role=\"search\" onSubmit={(e)=>{e.preventDefault(); setSearch(searchTerm);}}>\r\n                                        <input className=\"form-control me-2\" type=\"search\" placeholder=\"Tìm kiếm theo mã lớp\" id=\"Search\" onChange={(e)=>setSearchTerm(e.target.value)}/>\r\n                                        <button className=\"btn btn-outline-success\" type=\"submit\" >Search</button>\r\n                              </form>\r\n                    </div>\r\n                    <CourseTable filterCourses={filterCourses} checkedIds={checkedIds} setCheckedIds={setCheckedIds}/>\r\n          </div>\r\n           <OpenedCourses_ResultModal modal={modal} handleClose={handleClose}/>\r\n          </>\r\n         );\r\n}\r\nexport default OpenedCoursesPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}