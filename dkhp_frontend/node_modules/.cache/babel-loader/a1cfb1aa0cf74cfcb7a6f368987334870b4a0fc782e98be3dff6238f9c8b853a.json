{"ast":null,"code":"var _jsxFileName = \"D:\\\\DKHP_demo\\\\dkhp_frontend\\\\src\\\\Page\\\\RegisteredCoursesPage.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from \"react\";\nimport { Alert, Button, Modal } from \"react-bootstrap\";\nimport { unenrollCourses } from \"../API/StudentAPI\";\nimport { getEnrolledCourses } from \"../API/CourseAPI\";\nimport CourseTable from \"../Component/CourseTable\";\nimport { ClientContext } from \"../Router/ClientRouter\";\nimport { RegisteredCourses_AlertModal, RegisteredCourses_ResultModal } from \"../Component/Modal\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst RegisteredCoursesPage = () => {\n  _s();\n  const {\n    courseData,\n    setError\n  } = useContext(ClientContext);\n  const [checkedIds, setCheckedIds] = useState([]);\n  const [regIds, setRegIds] = useState([]);\n  const [modal, setModal] = useState({\n    show: 0,\n    data: null\n  }); //0:ko show, 1:show alertModal, 2:show resultModal\n  const [isDelButtonDisabled, setIsDelButtonDisabled] = useState(true);\n  const sendRequest = () => {\n    unenrollCourses(checkedIds).then(res => {\n      const result = new Map(Object.entries(res.data));\n      const updatedRegIds = regIds.filter(courseId => result.has(courseId) && result.get(courseId) != \"Unenroll successfully\");\n      setRegIds(updatedRegIds);\n      setModal({\n        show: 2,\n        data: updatedRegIds\n      });\n    }).catch(err => setError(err));\n  };\n  const handleClose = () => {\n    setModal({\n      show: false,\n      data: []\n    });\n  };\n  useEffect(() => {\n    if (checkedIds.size === 0) setIsDelButtonDisabled(true);else setIsDelButtonDisabled(false);\n  }, [checkedIds]);\n  useEffect(() => {\n    getEnrolledCourses().then(res => {\n      setRegIds(res.data);\n    }).catch(err => setError(err));\n  }, []);\n  const filterCourses = courseData.filter(course => regIds.indexOf(course.id) > -1);\n  const regInfo = {\n    numberOfCourses: filterCourses.length,\n    creditNumber: 0\n  };\n  for (let course of filterCourses) regInfo.creditNumber += course.subject.theoryCreditNumber;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"main-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ContentAlignment\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"\\u0110\\xE3 \\u0111\\u0103ng k\\xED: \", regInfo.numberOfCourses, \" l\\u1EDBp(\", regInfo.creditNumber, \" t\\xEDn ch\\u1EC9)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 41\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"btn btn-danger\",\n          onClick: () => setModal({\n            show: 1,\n            data: null\n          }),\n          disabled: isDelButtonDisabled,\n          children: \"H\\u1EE7y \\u0111\\u0103ng k\\xED\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(CourseTable, {\n        filterCourses: filterCourses,\n        setCheckedIds: setCheckedIds\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 31\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 21\n    }, this), modal.show != 0 && (modal.show == 1 ? /*#__PURE__*/_jsxDEV(RegisteredCourses_AlertModal, {\n      modal: modal,\n      courseData: courseData,\n      checkedIds: checkedIds,\n      sendRequest: sendRequest,\n      handleClose: handleClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 42\n    }, this) : /*#__PURE__*/_jsxDEV(RegisteredCourses_ResultModal, {\n      modal: modal,\n      handleClose: handleClose\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 34\n    }, this))]\n  }, void 0, true);\n};\n_s(RegisteredCoursesPage, \"RBwK40OMqzBeZ4MNv05v82gPUDw=\");\n_c = RegisteredCoursesPage;\nexport default RegisteredCoursesPage;\nvar _c;\n$RefreshReg$(_c, \"RegisteredCoursesPage\");","map":{"version":3,"names":["useState","useEffect","useContext","Alert","Button","Modal","unenrollCourses","getEnrolledCourses","CourseTable","ClientContext","RegisteredCourses_AlertModal","RegisteredCourses_ResultModal","jsxDEV","_jsxDEV","Fragment","_Fragment","RegisteredCoursesPage","_s","courseData","setError","checkedIds","setCheckedIds","regIds","setRegIds","modal","setModal","show","data","isDelButtonDisabled","setIsDelButtonDisabled","sendRequest","then","res","result","Map","Object","entries","updatedRegIds","filter","courseId","has","get","catch","err","handleClose","size","filterCourses","course","indexOf","id","regInfo","numberOfCourses","length","creditNumber","subject","theoryCreditNumber","children","className","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","disabled","_c","$RefreshReg$"],"sources":["D:/DKHP_demo/dkhp_frontend/src/Page/RegisteredCoursesPage.js"],"sourcesContent":["import { useState, useEffect, useContext } from \"react\";\r\nimport { Alert, Button, Modal } from \"react-bootstrap\";\r\nimport { unenrollCourses } from \"../API/StudentAPI\";\r\nimport { getEnrolledCourses } from \"../API/CourseAPI\";\r\nimport CourseTable from \"../Component/CourseTable\";\r\nimport { ClientContext} from \"../Router/ClientRouter\";\r\nimport { RegisteredCourses_AlertModal, RegisteredCourses_ResultModal } from \"../Component/Modal\";\r\nconst RegisteredCoursesPage=()=>{\r\n          const {courseData, setError}=useContext(ClientContext);\r\n          const [checkedIds, setCheckedIds]=useState([]);\r\n          const [regIds, setRegIds]=useState([]);\r\n          const [modal, setModal]=useState({show:0, data:null}); //0:ko show, 1:show alertModal, 2:show resultModal\r\n          const [isDelButtonDisabled, setIsDelButtonDisabled]=useState(true);\r\n          const sendRequest=()=>{\r\n                    unenrollCourses(checkedIds).then(res=>{\r\n                              const result=new Map(Object.entries(res.data));\r\n                              const updatedRegIds=regIds.filter(courseId=>result.has(courseId)&&result.get(courseId)!=\"Unenroll successfully\");\r\n                              setRegIds(updatedRegIds);\r\n                              setModal({show:2, data:updatedRegIds});\r\n                      })\r\n                      .catch(err=>setError(err))\r\n           }\r\n            const handleClose=()=>{\r\n                  setModal({show:false, data:[]});\r\n            }\r\n            useEffect(()=>{\r\n                        if(checkedIds.size===0) setIsDelButtonDisabled(true);\r\n                        else setIsDelButtonDisabled(false);\r\n            },[checkedIds])\r\n            useEffect(()=>{\r\n                        getEnrolledCourses().then(res=>{\r\n                              setRegIds(res.data);\r\n                        }).catch(err=>setError(err))\r\n                  },[])\r\n                  const filterCourses=courseData.filter(course=>regIds.indexOf(course.id)>-1);\r\n                  const regInfo={numberOfCourses:filterCourses.length,creditNumber:0};\r\n                  for(let course of filterCourses) regInfo.creditNumber+=course.subject.theoryCreditNumber;\r\n        return(\r\n          <>\r\n                    <div className=\"main-page\">\r\n                              <div className=\"ContentAlignment\">\r\n                                        <h4>Đã đăng kí: {regInfo.numberOfCourses} lớp({regInfo.creditNumber} tín chỉ)</h4>\r\n                                        <button type=\"button\" className=\"btn btn-danger\" onClick={()=>setModal({show:1,data:null})} disabled={isDelButtonDisabled}>Hủy đăng kí</button>\r\n                                        \r\n                              </div>\r\n                              <CourseTable filterCourses={filterCourses} setCheckedIds={setCheckedIds}/>\r\n                    </div>\r\n                    {modal.show!=0&&\r\n                          (modal.show==1?<RegisteredCourses_AlertModal modal={modal} courseData={courseData} checkedIds={checkedIds} sendRequest={sendRequest} handleClose={handleClose}/>\r\n                                :<RegisteredCourses_ResultModal modal={modal} handleClose={handleClose}/>)}\r\n          </>\r\n          );\r\n}\r\nexport default RegisteredCoursesPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}