{"ast":null,"code":"import _regeneratorRuntime from\"D:/DKHP_demo/dkhp_frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/DKHP_demo/dkhp_frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createForOfIteratorHelper from\"D:/DKHP_demo/dkhp_frontend/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"D:/DKHP_demo/dkhp_frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Route,Routes,useLocation,useNavigate}from\"react-router-dom\";import OpenedCoursesPage from\"../Page/OpenedCoursesPage\";import ErrorPage from\"../Page/ErrorPage\";import NavBar from\"../Component/Navbar\";import RegisteredCoursesPage from\"../Page/RegisteredCoursesPage\";import DashboardPage from\"../Page/DashboardPage\";import{createContext,useEffect,useState}from\"react\";import{getOpenedCourses,getUpdatedRegNumbers}from\"../API/CourseAPI\";import TimeTablePage from\"../Page/TimeTablePage\";import{useSnackbar}from\"notistack\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ClientContext=/*#__PURE__*/createContext();function ClientRouter(){var _useSnackbar=useSnackbar(),enqueueSnackbar=_useSnackbar.enqueueSnackbar;var navigate=useNavigate();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),courseData=_useState2[0],setCourseData=_useState2[1];var _useState3=useState(new Map()),_useState4=_slicedToArray(_useState3,2),regNumbers=_useState4[0],setRegNumbers=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var anchorOrigin={horizontal:'center',vertical:'bottom'};useEffect(function(){var updatedRegNumbers=new Map();var _iterator=_createForOfIteratorHelper(courseData),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var c=_step.value;updatedRegNumbers.set(c.id+\"\",c.registeredNumber);}}catch(err){_iterator.e(err);}finally{_iterator.f();}setRegNumbers(updatedRegNumbers);},[courseData]);function loadCourseData(){return _loadCourseData.apply(this,arguments);}function _loadCourseData(){_loadCourseData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:getOpenedCourses().then(function(res){setCourseData(res.data);setError(null);}).catch(function(err){return setError(err);});case 1:case\"end\":return _context.stop();}},_callee);}));return _loadCourseData.apply(this,arguments);}function logOut(){localStorage.removeItem(\"Authorization\");localStorage.removeItem(\"Role\");navigate(\"/login\");}useEffect(function(){var sseClient=getUpdatedRegNumbers(setRegNumbers);return function(){return sseClient.close();};},[]);useEffect(function(){if(error!=null){if(error.response.status==401)logOut();var config={variant:'error',anchorOrigin:anchorOrigin};enqueueSnackbar(error.response.data,config);}},[error]);useEffect(function(){if(courseData.length==0)loadCourseData();},[]);return/*#__PURE__*/_jsxs(ClientContext.Provider,{value:{courseData:courseData,regNumbers:regNumbers,setError:setError},children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",element:/*#__PURE__*/_jsx(DashboardPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/OpenedCourses\",element:/*#__PURE__*/_jsx(OpenedCoursesPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/RegisteredCourses\",element:/*#__PURE__*/_jsx(RegisteredCoursesPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/TimeTable\",element:/*#__PURE__*/_jsx(TimeTablePage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/*\",element:/*#__PURE__*/_jsx(ErrorPage,{message:\"404 Error! Page Not Found\"})})]})]});}export default ClientRouter;","map":{"version":3,"names":["Route","Routes","useLocation","useNavigate","OpenedCoursesPage","ErrorPage","NavBar","RegisteredCoursesPage","DashboardPage","createContext","useEffect","useState","getOpenedCourses","getUpdatedRegNumbers","TimeTablePage","useSnackbar","jsx","_jsx","jsxs","_jsxs","ClientContext","ClientRouter","_useSnackbar","enqueueSnackbar","navigate","_useState","_useState2","_slicedToArray","courseData","setCourseData","_useState3","Map","_useState4","regNumbers","setRegNumbers","_useState5","_useState6","error","setError","anchorOrigin","horizontal","vertical","updatedRegNumbers","_iterator","_createForOfIteratorHelper","_step","s","n","done","c","value","set","id","registeredNumber","err","e","f","loadCourseData","_loadCourseData","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","then","res","data","catch","stop","logOut","localStorage","removeItem","sseClient","close","response","status","config","variant","length","Provider","children","exact","path","element","message"],"sources":["D:/DKHP_demo/dkhp_frontend/src/Router/ClientRouter.js"],"sourcesContent":["import { Route, Routes, useLocation, useNavigate } from \"react-router-dom\";\r\nimport OpenedCoursesPage from \"../Page/OpenedCoursesPage\";\r\nimport ErrorPage from \"../Page/ErrorPage\";\r\nimport NavBar from \"../Component/Navbar\";\r\nimport RegisteredCoursesPage from \"../Page/RegisteredCoursesPage\";\r\nimport DashboardPage from \"../Page/DashboardPage\";\r\nimport { createContext, useEffect, useState } from \"react\";\r\nimport { getOpenedCourses, getUpdatedRegNumbers } from \"../API/CourseAPI\";\r\nimport TimeTablePage from \"../Page/TimeTablePage\";\r\nimport { useSnackbar } from \"notistack\";\r\n\r\nexport const ClientContext= createContext();\r\nfunction ClientRouter(){\r\n     const { enqueueSnackbar } = useSnackbar();\r\n     const navigate = useNavigate();\r\n     const [courseData, setCourseData]=useState([]);\r\n     const [regNumbers, setRegNumbers]=useState(new Map());\r\n     const[error, setError]=useState(null);\r\n     let anchorOrigin = { horizontal: 'center' , vertical: 'bottom'}\r\n     useEffect(()=>{\r\n          const updatedRegNumbers=new Map();\r\n          for(let c of courseData) updatedRegNumbers.set(c.id+\"\", c.registeredNumber);\r\n          setRegNumbers(updatedRegNumbers);\r\n     }, [courseData])\r\n     async function loadCourseData(){\r\n          getOpenedCourses().then(res=>{\r\n               setCourseData(res.data);\r\n               setError(null);\r\n          })\r\n          .catch(err=>setError(err))\r\n     }\r\n     function logOut(){\r\n          localStorage.removeItem(\"Authorization\");\r\n          localStorage.removeItem(\"Role\");\r\n          navigate(\"/login\");\r\n     }\r\n     useEffect(()=>{\r\n          let sseClient=getUpdatedRegNumbers(setRegNumbers);\r\n          return ()=>sseClient.close();\r\n     },[])\r\n     useEffect(()=>{\r\n          if(error!=null){\r\n               if(error.response.status==401) logOut();\r\n               let config = {variant: 'error',anchorOrigin:anchorOrigin}\r\n               enqueueSnackbar(error.response.data,config);\r\n          }\r\n     },[error])\r\n     useEffect(()=>{\r\n          if(courseData.length==0) loadCourseData();\r\n     },[])\r\nreturn(\r\n<ClientContext.Provider value={{courseData,regNumbers, setError}}>\r\n          <NavBar/>\r\n          <Routes>\r\n                    <Route exact path=\"/\" element={<DashboardPage />}/>\r\n                    <Route path=\"/OpenedCourses\" element={<OpenedCoursesPage/>}/>\r\n                    <Route path=\"/RegisteredCourses\" element={<RegisteredCoursesPage/>}/>\r\n                    <Route path=\"/TimeTable\" element={<TimeTablePage/>}/>\r\n                    <Route path=\"/*\" element={<ErrorPage message=\"404 Error! Page Not Found\"/>}/>\r\n          </Routes>\r\n     </ClientContext.Provider>\r\n)\r\n}\r\nexport default ClientRouter;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}